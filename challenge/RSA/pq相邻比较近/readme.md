```python
import gmpy2
from Crypto.Util.number import getPrime


def nextPrime(p):
    assert gmpy2.is_prime(p)
    q = p + 2
    while True:
        if gmpy2.is_prime(q):
            return q
        q = q + 2


p = getPrime(1024)
q = nextPrime(p)
n = p * q
n_root2 = gmpy2.iroot(n, 2)[0]


print("p:", p)
print("q:", q)
print("q - p:", q - p)
print("n:", n)
print("n_root2:", n_root2)

# yafu.exe
fermat(n, n_root2)
```

一道题目
```python
n = p * q， nn = nextPrime(p) * nextPrime(q)
已知n, nn, 求p, q

# n = p * q
n = 15260473398916071686287752340249158279343013077145667794514717692352941873466690686288442204714585854869226872705293008837554012949598044297596015507031315006195230644722581744643756573982729344499452200116366327869178694692162014446578711956663348262932703160394101606708475725742890049311933691849747707673216322758418530420118502556719323543077771821163439824876751874675862075401986796272014746925015772045578403357300038192830197985871077621213669817380577176611560467051848951044963527185916781094981810804641387975398361694935093473717039550361644252381923994841138817152748279477868854093033234031994635408593

# nn = nextPrime(p) * nextPrime(q)
nn = 15260473398916071686287752340249158279343013077145667794514717692352941873466690686288442204714585854869226872705293008837554012949598044297596015507031315006195230644722581744643756573982729344499452200116366327869178694692162014446578711956663348262932703160394101606708475725742890049311933691849747707914818082716474881224336472709074679047145667796106895298086129057288449508218237679974321952279429832707229303594474494519945899481320231091983665654947081839784375373657345023890332691371443571370016623789041883821610353473726465037590414008198228956920913181526550775524028059426312173493877228564452496582329


# u = n * nn = p * q * p1 * q1 = (p * q1) * (p1 * q)
# p * q1 跟 p1 * q 相近，故可以用fermat来分解
u = 232882048359025041603349679257587135366658793541291263577960850454861736745191382024466414750069198318081575636240487175966836967310244964723108523157195968945054248808785583710726063209551543140231550110430762072304135143661494250687717996647327300887593267074845891108677400000966208687741288065227990824412410930185667246656990585199529662454038122665968841565524181673201340336505754268824910560623458410284676987622487846402072350810666483444848036677185328775882980888912923291080419469663638989437020559702739421415080782126251979917637131720037297904690791764120429989808534596160179127245128104776006298758432405534693119305748175917716141829510113621452769873278763355838342482723390808824825696798440403953992784888552830424387867510804367839649361688887592348545910829669468862268753174074559975852745130233058549739190150419920644308873383749415151876540729845908186010864586822982093559975099500869166267465782785046292308545494942713351075907069333512498555358939398728748312010409487281105711890679456644532261529354110783538466759736208211281238110682081774894262890527287280547458594941375384843021620690349865753901420946193561519247833635375379991175705271750770983534284958285504115644509024175811702740978553097


# yafu.exe
fermat(u, n)

# p * q1
t1 = 15260473398916071686287752340249158279343013077145667794514717692352941873466690686288442204714585854869226872705293008837554012949598044297596015507031315006195230644722581744643756573982729344499452200116366327869178694692162014446578711956663348262932703160394101606708475725742890049311933691849747707848698181779922734285941890769264141559527039840086403392549090808193748489050095283449644352842137175880563570509148071942610886380134004166282465797539022104320570338071087658513016361684267796101120798378842452132706404970504991921543179287023714671699251857031828804222188433881923172940023917170122595666553

# p1 * q
t2 = 15260473398916071686287752340249158279343013077145667794514717692352941873466690686288442204714585854869226872705293008837554012949598044297596015507031315006195230644722581744643756573982729344499452200116366327869178694692162014446578711956663348262932703160394101606708475725742890049311933691849747707739336223694970677358513084496529861030696399777183931730413790123770563094570129192796692346362308428872244136442626460770165211087057304546914869674788636912075365502638106316422279856873092556363877636214840819664302310198156566589764274271536158537603585319335860788454587905022257854646886545426324535564049


p = gcd(t1, n)
q = gcd(t2, n)

p1 = gcd(t1, nn)
q1 = gcd(t2, nn)
```
